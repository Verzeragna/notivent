<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ru.notivent.dao.GeoPointHistoryDao">

    <select id="create" parameterType="map" resultType="ru.notivent.model.GeoPoint">
        INSERT INTO mvp.geo_point_history(uuid,user_uuid,latitude,longitude,point,name,description,type,created_at,live,grade,user_latitude,user_longitude)
        VALUES(#{entity.uuid},#{entity.userUuid},#{entity.latitude},#{entity.longitude},
        ST_SetSRID(ST_MakePoint(#{entity.longitude}, #{entity.latitude}), 4326)::geometry,
        #{entity.name},#{entity.description},#{entity.type}::mvp.geo_point_type,#{entity.createdAt},#{entity.live},#{entity.grade},#{entity.userLatitude},#{entity.userLongitude})
        RETURNING *
    </select>

</mapper>